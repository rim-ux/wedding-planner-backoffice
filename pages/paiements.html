<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paiements | Golden Promise</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;500&family=Montserrat:wght@300;500;600&family=Parisienne&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --rose-gold: #c5a059;
            --silk: #fcfaf8;
            --text: #2d2a26;
            --white: #ffffff;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--silk);
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 280px;
            background: var(--white);
            border-right: 1px solid rgba(197, 160, 89, 0.1);
            padding: 40px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        .logo {
            padding: 0 40px;
            margin-bottom: 30px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem;
            letter-spacing: 3px;
        }
        .logo span {
            font-family: 'Parisienne', cursive;
            color: var(--rose-gold);
        }
        .menu-list { list-style: none; }
        .menu-item { padding: 0 20px; margin-bottom: 5px; }
        .menu-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 25px;
            color: var(--text);
            text-decoration: none;
            border-radius: 50px;
            font-size: 0.75rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.6;
            transition: 0.3s;
        }
        .menu-link:hover, .menu-link.active {
            background: rgba(197, 160, 89, 0.1);
            opacity: 1;
        }
        .menu-link i { color: var(--rose-gold); }
        .logout-btn {
            margin: 30px 20px;
            padding: 15px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            border-radius: 50px;
            width: calc(100% - 40px);
            cursor: pointer;
            font-size: 0.75rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 60px;
        }
        header h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3rem;
            font-weight: 300;
            margin-bottom: 10px;
        }
        header p {
            font-family: 'Parisienne', cursive;
            font-size: 1.8rem;
            color: var(--rose-gold);
            margin-bottom: 40px;
        }
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .stat-card {
            background: var(--white);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
        }
        .stat-card h3 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #999;
            margin-bottom: 10px;
        }
        .stat-card p {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--rose-gold);
        }
        .actions-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        .search-box {
            padding: 12px 20px;
            border: 2px solid rgba(197, 160, 89, 0.2);
            border-radius: 50px;
            width: 300px;
            outline: none;
        }
        .btn {
            padding: 12px 30px;
            background: var(--rose-gold);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.85rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-left: 10px;
        }
        .btn:hover { opacity: 0.9; }
        .table-container {
            background: var(--white);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.05);
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th {
            text-align: left;
            padding: 20px;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--rose-gold);
            border-bottom: 2px solid var(--silk);
        }
        td {
            padding: 20px;
            border-bottom: 1px solid var(--silk);
        }
        tr:hover { background: var(--silk); }
        .status {
            padding: 6px 15px;
            border-radius: 50px;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .status-paye { background: rgba(34, 197, 94, 0.1); color: #22c55e; }
        .status-attente { background: rgba(245, 158, 11, 0.1); color: #F59E0B; }
        .status-retard { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
        .action-btns {
            display: flex;
            gap: 10px;
        }
        .btn-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: none;
            background: var(--silk);
            cursor: pointer;
            transition: 0.3s;
        }
        .btn-icon:hover {
            background: var(--rose-gold);
            color: white;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-content h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            margin-bottom: 30px;
            color: var(--rose-gold);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(197, 160, 89, 0.2);
            border-radius: 10px;
            outline: none;
        }
        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        .btn-secondary {
            background: #ddd;
            color: var(--text);
        }
        
        .detail-row {
            display: flex;
            padding: 15px 0;
            border-bottom: 1px solid var(--silk);
        }
        .detail-row:last-child {
            border-bottom: none;
        }
        .detail-label {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #999;
            width: 150px;
            font-weight: 600;
        }
        .detail-value {
            flex: 1;
            font-weight: 500;
            color: var(--text);
        }
        
        /* RTL Support */
        body[dir="rtl"] .sidebar {
            border-right: none;
            border-left: 1px solid rgba(197, 160, 89, 0.1);
        }
        body[dir="rtl"] .main-content {
            margin-left: 0;
            margin-right: 280px;
        }
        body[dir="rtl"] .menu-link {
            flex-direction: row-reverse;
        }
        body[dir="rtl"] .actions-bar {
            flex-direction: row-reverse;
        }
        body[dir="rtl"] table {
            direction: rtl;
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo">Golden <span>Promise</span></div>
        
        <div style="padding: 0 20px; margin-bottom: 30px;">
            <select id="langSelect" onchange="setLang(this.value)" style="
                width: 100%;
                padding: 12px;
                border: 2px solid rgba(197, 160, 89, 0.2);
                border-radius: 50px;
                background: white;
                cursor: pointer;
                font-size: 0.85rem;
                outline: none;
                text-align: center;
            ">
                <option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
                <option value="en">ðŸ‡¬ðŸ‡§ English</option>
                <option value="ar">ðŸ‡²ðŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            </select>
        </div>

        <ul class="menu-list">
            <li class="menu-item">
                <a href="dashboard.html" class="menu-link">
                    <i class="fas fa-chart-line"></i> 
                    <span data-i18n="dashboard">Tableau de bord</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="clients.html" class="menu-link">
                    <i class="fas fa-users"></i> 
                    <span data-i18n="clients">Clients</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="mariages.html" class="menu-link">
                    <i class="fas fa-heart"></i> 
                    <span data-i18n="mariages">Mariages</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="prestataires.html" class="menu-link">
                    <i class="fas fa-briefcase"></i> 
                    <span data-i18n="prestataires">Prestataires</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="paiements.html" class="menu-link active">
                    <i class="fas fa-credit-card"></i> 
                    <span data-i18n="paiements">Paiements</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="messages.html" class="menu-link">
                    <i class="fas fa-envelope"></i> 
                    <span data-i18n="messages">Messages</span>
                </a>
            </li>
        </ul>
        <button class="logout-btn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> 
            <span data-i18n="logout">DÃ©connexion</span>
        </button>
    </div>

    <div class="main-content">
        <header>
            <h1 data-i18n="paiements_title">Gestion des Paiements</h1>
            <p data-i18n="paiements_subtitle">Suivi financier</p>
        </header>

        <div class="stats-bar">
            <div class="stat-card">
                <h3 data-i18n="total_received">Total ReÃ§u</h3>
                <p id="totalReceived">0 MAD</p>
            </div>
            <div class="stat-card">
                <h3 data-i18n="pending_amount">En Attente</h3>
                <p id="pendingAmount" style="color: #F59E0B;">0 MAD</p>
            </div>
            <div class="stat-card">
                <h3 data-i18n="overdue_amount">En Retard</h3>
                <p id="overdueAmount" style="color: #ef4444;">0 MAD</p>
            </div>
        </div>

        <div class="actions-bar">
            <input type="text" class="search-box" id="searchInput" data-i18n="search" placeholder="Rechercher...">
            <div>
                <button class="btn" onclick="openAddModal()">
                    <i class="fas fa-plus"></i> 
                    <span data-i18n="add_payment">Ajouter Paiement</span>
                </button>
                <button class="btn" onclick="exportCSV()">
                    <i class="fas fa-download"></i> 
                    <span data-i18n="export">Export CSV</span>
                </button>
            </div>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th data-i18n="id">ID</th>
                        <th data-i18n="client">Client</th>
                        <th data-i18n="amount">Montant</th>
                        <th data-i18n="date">Date</th>
                        <th data-i18n="method">MÃ©thode</th>
                        <th data-i18n="status">Statut</th>
                        <th data-i18n="actions">Actions</th>
                    </tr>
                </thead>
                <tbody id="paymentsTable"></tbody>
            </table>
        </div>
    </div>

    <!-- MODAL DÃ‰TAILS -->
    <div id="detailsModal" class="modal">
        <div class="modal-content">
            <h2 data-i18n="payment_details">ðŸ’³ DÃ©tails du Paiement</h2>
            <div class="detail-row">
                <span class="detail-label" data-i18n="client">Client :</span>
                <span class="detail-value" id="detailClient">-</span>
            </div>
            <div class="detail-row">
                <span class="detail-label" data-i18n="amount">Montant :</span>
                <span class="detail-value" id="detailAmount">-</span>
            </div>
            <div class="detail-row">
                <span class="detail-label" data-i18n="date">Date :</span>
                <span class="detail-value" id="detailDate">-</span>
            </div>
            <div class="detail-row">
                <span class="detail-label" data-i18n="method">MÃ©thode :</span>
                <span class="detail-value" id="detailMethod">-</span>
            </div>
            <div class="detail-row">
                <span class="detail-label" data-i18n="status">Statut :</span>
                <span class="detail-value" id="detailStatus">-</span>
            </div>
            <div class="modal-actions">
                <button class="btn" onclick="closeDetailsModal()">
                    <i class="fas fa-times"></i> 
                    <span data-i18n="close">Fermer</span>
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL AJOUTER/MODIFIER -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle" data-i18n="add_payment_title">Ajouter un Paiement</h2>
            <form id="paymentForm">
                <div class="form-group">
                    <label data-i18n="client">Client</label>
                    <input type="text" id="client" required>
                </div>
                <div class="form-group">
                    <label data-i18n="amount">Montant (MAD)</label>
                    <input type="number" id="montant" required min="0">
                </div>
                <div class="form-group">
                    <label data-i18n="date">Date</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-group">
                    <label data-i18n="method">MÃ©thode</label>
                    <select id="methode" required>
                        <option value="EspÃ¨ces">EspÃ¨ces</option>
                        <option value="Virement">Virement</option>
                        <option value="ChÃ¨que">ChÃ¨que</option>
                        <option value="Carte">Carte</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-i18n="status">Statut</label>
                    <select id="statut" required>
                        <option value="paye">PayÃ©</option>
                        <option value="attente">En attente</option>
                        <option value="retard">En retard</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn" data-i18n="save">Enregistrer</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()" data-i18n="cancel">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function logout() {
            window.location.href = 'index.html';
        }

        // DonnÃ©es des paiements
        const defaultPayments = [
            { id: 1, client: "Sarah & Ahmed", montant: 50000, date: "2026-01-05", methode: "Virement", statut: "paye" },
            { id: 2, client: "Fatima & Youssef", montant: 35000, date: "2026-01-10", methode: "EspÃ¨ces", statut: "attente" },
            { id: 3, client: "Leila & Omar", montant: 45000, date: "2025-12-20", methode: "ChÃ¨que", statut: "retard" },
            { id: 4, client: "Khadija & Amine", montant: 60000, date: "2026-01-08", methode: "Carte", statut: "paye" }
        ];

        let allData = JSON.parse(localStorage.getItem('goldenpromise_data') || '{}');
        
        if (!allData.paiements || allData.paiements.length === 0) {
            allData.paiements = defaultPayments;
            localStorage.setItem('goldenpromise_data', JSON.stringify(allData));
        }

        let paiements = allData.paiements;
        let editingId = null;

        const statusClasses = {
            paye: 'status-paye',
            attente: 'status-attente',
            retard: 'status-retard'
        };

        const statusNoms = {
            paye: 'PayÃ©',
            attente: 'En attente',
            retard: 'En retard'
        };

        function updateStats() {
            const totalReceived = paiements.filter(p => p.statut === 'paye').reduce((sum, p) => sum + p.montant, 0);
            const pendingAmount = paiements.filter(p => p.statut === 'attente').reduce((sum, p) => sum + p.montant, 0);
            const overdueAmount = paiements.filter(p => p.statut === 'retard').reduce((sum, p) => sum + p.montant, 0);

            document.getElementById('totalReceived').textContent = totalReceived.toLocaleString() + ' MAD';
            document.getElementById('pendingAmount').textContent = pendingAmount.toLocaleString() + ' MAD';
            document.getElementById('overdueAmount').textContent = overdueAmount.toLocaleString() + ' MAD';
        }

        function renderTable() {
            const tbody = document.getElementById('paymentsTable');
            tbody.innerHTML = paiements.map(p => `
                <tr>
                    <td>${p.id}</td>
                    <td><strong>${p.client}</strong></td>
                    <td>${p.montant.toLocaleString()} MAD</td>
                    <td>${new Date(p.date).toLocaleDateString('fr-FR')}</td>
                    <td>${p.methode}</td>
                    <td><span class="status ${statusClasses[p.statut]}">${statusNoms[p.statut]}</span></td>
                    <td class="action-btns">
                        <button class="btn-icon" onclick="viewPayment(${p.id})" title="Voir dÃ©tails">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn-icon" onclick="editPayment(${p.id})" title="Modifier">
                            <i class="fas fa-pen"></i>
                        </button>
                        <button class="btn-icon" onclick="deletePayment(${p.id})" title="Supprimer">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
            updateStats();
        }

        // BOUTON VOIR
        function viewPayment(id) {
            const payment = paiements.find(p => p.id === id);
            if (payment) {
                document.getElementById('detailClient').textContent = payment.client;
                document.getElementById('detailAmount').textContent = payment.montant.toLocaleString() + ' MAD';
                document.getElementById('detailDate').textContent = new Date(payment.date).toLocaleDateString('fr-FR');
                document.getElementById('detailMethod').textContent = payment.methode;
                document.getElementById('detailStatus').innerHTML = `<span class="status ${statusClasses[payment.statut]}">${statusNoms[payment.statut]}</span>`;
                document.getElementById('detailsModal').style.display = 'flex';
            }
        }

        function closeDetailsModal() {
            document.getElementById('detailsModal').style.display = 'none';
        }

        // BOUTON AJOUTER
        function openAddModal() {
            document.getElementById('paymentModal').style.display = 'flex';
            document.getElementById('modalTitle').textContent = 'Ajouter un Paiement';
            document.getElementById('paymentForm').reset();
            editingId = null;
        }

        function closeModal() {
            document.getElementById('paymentModal').style.display = 'none';
        }

        // BOUTON MODIFIER
        function editPayment(id) {
            const payment = paiements.find(p => p.id === id);
            if (payment) {
                document.getElementById('paymentModal').style.display = 'flex';
                document.getElementById('modalTitle').textContent = 'Modifier Paiement';
                document.getElementById('client').value = payment.client;
                document.getElementById('montant').value = payment.montant;
                document.getElementById('date').value = payment.date;
                document.getElementById('methode').value = payment.methode;
                document.getElementById('statut').value = payment.statut;
                editingId = payment.id;
            }
        }

        // BOUTON SUPPRIMER
        function deletePayment(id) {
            if (confirm('Voulez-vous vraiment supprimer ce paiement ?')) {
                paiements = paiements.filter(p => p.id !== id);
                allData.paiements = paiements;
                localStorage.setItem('goldenpromise_data', JSON.stringify(allData));
                renderTable();
            }
        }

        // SOUMETTRE FORMULAIRE
        document.getElementById('paymentForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const payment = {
                id: editingId || Date.now(),
                client: document.getElementById('client').value,
                montant: parseFloat(document.getElementById('montant').value),
                date: document.getElementById('date').value,
                methode: document.getElementById('methode').value,
                statut: document.getElementById('statut').value
            };

            if (editingId) {
                const index = paiements.findIndex(p => p.id === editingId);
                paiements[index] = payment;
            } else {
                paiements.push(payment);
            }

            allData.paiements = paiements;
            localStorage.setItem('goldenpromise_data', JSON.stringify(allData));
            
            renderTable();
            closeModal();
        });

        // EXPORT CSV
        function exportCSV() {
            let csv = 'ID;Client;Montant;Date;MÃ©thode;Statut\n';
            paiements.forEach(p => {
                csv += `${p.id};${p.client};${p.montant};${p.date};${p.methode};${statusNoms[p.statut]}\n`;
            });
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'paiements.csv';
            a.click();
            URL.revokeObjectURL(url);
        }

        // RECHERCHE
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const rows = document.querySelectorAll('#paymentsTable tr');
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(term) ? '' : 'none';
            });
        });

        // Fermer modal en cliquant en dehors
        window.onclick = function(event) {
            const modal = document.getElementById('paymentModal');
            const detailsModal = document.getElementById('detailsModal');
            if (event.target == modal) {
                closeModal();
            }
            if (event.target == detailsModal) {
                closeDetailsModal();
            }
        }

        renderTable();
    </script>

    <script>
    let currentLang = 'fr';
    
    const t = {
        fr: {
            dashboard: "Tableau de bord", clients: "Clients", mariages: "Mariages",
            prestataires: "Prestataires", paiements: "Paiements", messages: "Messages",
            logout: "DÃ©connexion", paiements_title: "Gestion des Paiements",
            paiements_subtitle: "Suivi financier",
            total_received: "Total ReÃ§u", pending_amount: "En Attente", overdue_amount: "En Retard",
            search: "Rechercher...", add_payment: "Ajouter Paiement", export: "Export CSV",
            id: "ID", client: "Client", amount: "Montant", date: "Date", 
            method: "MÃ©thode", status: "Statut", actions: "Actions",
            payment_details: "ðŸ’³ DÃ©tails du Paiement", close: "Fermer",
            add_payment_title: "Ajouter un Paiement", save: "Enregistrer", cancel: "Annuler"
        },
        en: {
            dashboard: "Dashboard", clients: "Clients", mariages: "Weddings",
            prestataires: "Vendors", paiements: "Payments", messages: "Messages",
            logout: "Logout", paiements_title: "Payment Management",
            paiements_subtitle: "Financial tracking",
            total_received: "Total Received", pending_amount: "Pending", overdue_amount: "Overdue",
            search: "Search...", add_payment: "Add Payment", export: "Export CSV",
            id: "ID", client: "Client", amount: "Amount", date: "Date",
            method: "Method", status: "Status", actions: "Actions",
            payment_details: "ðŸ’³ Payment Details", close: "Close",
            add_payment_title: "Add Payment", save: "Save", cancel: "Cancel"
        },
        ar: {
            dashboard: "Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©", clients: "Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡", mariages: "Ø­ÙÙ„Ø§Øª Ø§Ù„Ø²ÙØ§Ù",
            prestataires: "Ù…Ù‚Ø¯Ù…Ùˆ Ø§Ù„Ø®Ø¯Ù…Ø§Øª", paiements: "Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª", messages: "Ø§Ù„Ø±Ø³Ø§Ø¦Ù„",
            logout: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬", paiements_title: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª",
            paiements_subtitle: "Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø§Ù„ÙŠ",
            total_received: "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…Ø³ØªÙ„Ù…", pending_amount: "ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±", overdue_amount: "Ù…ØªØ£Ø®Ø±",
            search: "Ø¨Ø­Ø«...", add_payment: "Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©", export: "ØªØµØ¯ÙŠØ± CSV",
            id: "Ø§Ù„Ù…Ø¹Ø±Ù", client: "Ø§Ù„Ø¹Ù…ÙŠÙ„", amount: "Ø§Ù„Ù…Ø¨Ù„Øº", date: "Ø§Ù„ØªØ§Ø±ÙŠØ®",
            method: "Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©", status: "Ø§Ù„Ø­Ø§Ù„Ø©", actions: "Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",
            payment_details: "ðŸ’³ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙØ¹", close: "Ø¥ØºÙ„Ø§Ù‚",
            add_payment_title: "Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©", save: "Ø­ÙØ¸", cancel: "Ø¥Ù„ØºØ§Ø¡"
        }
    };

    function setLang(lang) {
        currentLang = lang;
        localStorage.setItem('lang', lang);
        document.documentElement.lang = lang;
        document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
        
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (t[lang] && t[lang][key]) {
                if (el.placeholder !== undefined) el.placeholder = t[lang][key];
                else el.textContent = t[lang][key];
            }
        });
    }

    window.addEventListener('DOMContentLoaded', () => {
        const lang = localStorage.getItem('lang') || 'fr';
        currentLang = lang;
        setLang(lang);
        const sel = document.getElementById('langSelect');
        if (sel) sel.value = lang;
    });
    </script>

</body>
</html>
