<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages | Golden Promise</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;500&family=Montserrat:wght@300;500;600&family=Parisienne&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --rose-gold: #c5a059;
            --silk: #fcfaf8;
            --text: #2d2a26;
            --white: #ffffff;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--silk);
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 280px;
            background: var(--white);
            border-right: 1px solid rgba(197, 160, 89, 0.1);
            padding: 40px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        .logo {
            padding: 0 40px;
            margin-bottom: 30px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem;
            letter-spacing: 3px;
        }
        .logo span {
            font-family: 'Parisienne', cursive;
            color: var(--rose-gold);
        }
        .menu-list { list-style: none; }
        .menu-item { padding: 0 20px; margin-bottom: 5px; }
        .menu-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 25px;
            color: var(--text);
            text-decoration: none;
            border-radius: 50px;
            font-size: 0.75rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.6;
            transition: 0.3s;
        }
        .menu-link:hover, .menu-link.active {
            background: rgba(197, 160, 89, 0.1);
            opacity: 1;
        }
        .menu-link i { color: var(--rose-gold); }
        .logout-btn {
            margin: 30px 20px;
            padding: 15px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            border-radius: 50px;
            width: calc(100% - 40px);
            cursor: pointer;
            font-size: 0.75rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 60px;
        }
        header h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3rem;
            font-weight: 300;
            margin-bottom: 10px;
        }
        header p {
            font-family: 'Parisienne', cursive;
            font-size: 1.8rem;
            color: var(--rose-gold);
            margin-bottom: 40px;
        }
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .stat-card {
            background: var(--white);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
        }
        .stat-card h3 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #999;
            margin-bottom: 10px;
        }
        .stat-card p {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--rose-gold);
        }
        .actions-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        .search-box {
            padding: 12px 20px;
            border: 2px solid rgba(197, 160, 89, 0.2);
            border-radius: 50px;
            width: 300px;
            outline: none;
        }
        .btn {
            padding: 12px 30px;
            background: var(--rose-gold);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.85rem;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        .btn:hover { opacity: 0.9; }
        .messages-container {
            background: var(--white);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.05);
            min-height: 400px;
        }
        .message-card {
            padding: 25px;
            border-bottom: 1px solid var(--silk);
            transition: 0.3s;
            cursor: pointer;
        }
        .message-card:hover {
            background: var(--silk);
            border-radius: 10px;
        }
        .message-card:last-child {
            border-bottom: none;
        }
        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .message-sender {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--text);
        }
        .message-date {
            font-size: 0.8rem;
            color: #999;
        }
        .message-subject {
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--rose-gold);
        }
        .message-preview {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        .badge-new {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-left: 10px;
        }
        .action-btns {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .btn-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: none;
            background: var(--silk);
            cursor: pointer;
            transition: 0.3s;
        }
        .btn-icon:hover {
            background: var(--rose-gold);
            color: white;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-content h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--rose-gold);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(197, 160, 89, 0.2);
            border-radius: 10px;
            outline: none;
            font-family: 'Montserrat', sans-serif;
        }
        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }
        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        .btn-secondary {
            background: #ddd;
            color: var(--text);
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #22c55e;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 2000;
            display: none;
            animation: slideIn 0.3s ease;
        }
        @keyframes slideIn {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }
        
        /* RTL Support pour Arabe */
        body[dir="rtl"] .sidebar {
            border-right: none;
            border-left: 1px solid rgba(197, 160, 89, 0.1);
        }
        body[dir="rtl"] .main-content {
            margin-left: 0;
            margin-right: 280px;
        }
        body[dir="rtl"] .menu-link {
            flex-direction: row-reverse;
        }
        body[dir="rtl"] .actions-bar {
            flex-direction: row-reverse;
        }
        body[dir="rtl"] .message-header {
            flex-direction: row-reverse;
        }
        body[dir="rtl"] .badge-new {
            margin-left: 0;
            margin-right: 10px;
        }
    </style>
</head>
<body>

    <div id="notification" class="notification">
        <i class="fas fa-check-circle"></i> <span data-i18n="msg_success">Message envoy√© avec succ√®s !</span>
    </div>

    <div class="sidebar">
        <div class="logo">Golden <span>Promise</span></div>
        
        <div style="padding: 0 20px; margin-bottom: 30px;">
            <select id="langSelect" onchange="setLang(this.value)" style="
                width: 100%;
                padding: 12px;
                border: 2px solid rgba(197, 160, 89, 0.2);
                border-radius: 50px;
                background: white;
                cursor: pointer;
                font-size: 0.85rem;
                outline: none;
                text-align: center;
            ">
                <option value="fr">üá´üá∑ Fran√ßais</option>
                <option value="en">üá¨üáß English</option>
                <option value="ar">üá≤üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            </select>
        </div>

        <ul class="menu-list">
            <li class="menu-item">
                <a href="dashboard.html" class="menu-link">
                    <i class="fas fa-chart-line"></i> 
                    <span data-i18n="dashboard">Tableau de bord</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="clients.html" class="menu-link">
                    <i class="fas fa-users"></i> 
                    <span data-i18n="clients">Clients</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="mariages.html" class="menu-link">
                    <i class="fas fa-heart"></i> 
                    <span data-i18n="mariages">Mariages</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="prestataires.html" class="menu-link">
                    <i class="fas fa-briefcase"></i> 
                    <span data-i18n="prestataires">Prestataires</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="paiements.html" class="menu-link">
                    <i class="fas fa-credit-card"></i> 
                    <span data-i18n="paiements">Paiements</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="messages.html" class="menu-link active">
                    <i class="fas fa-envelope"></i> 
                    <span data-i18n="messages">Messages</span>
                </a>
            </li>
        </ul>
        <button class="logout-btn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> 
            <span data-i18n="logout">D√©connexion</span>
        </button>
    </div>

    <div class="main-content">
        <header>
            <h1 data-i18n="messages_title">Messagerie</h1>
            <p data-i18n="messages_subtitle">Communication avec les clients</p>
        </header>

        <div class="stats-bar">
            <div class="stat-card">
                <h3 data-i18n="total_messages">Total Messages</h3>
                <p id="totalMessages">10</p>
            </div>
            <div class="stat-card">
                <h3 data-i18n="new_messages">Nouveaux</h3>
                <p id="newMessages" style="color: #ef4444;">4</p>
            </div>
            <div class="stat-card">
                <h3 data-i18n="read_messages">Lus</h3>
                <p id="readMessages" style="color: #22c55e;">6</p>
            </div>
        </div>

        <div class="actions-bar">
            <input type="text" class="search-box" id="searchInput" data-i18n-placeholder="search" placeholder="Rechercher...">
            <button class="btn" onclick="openComposeModal()">
                <i class="fas fa-plus"></i> 
                <span data-i18n="compose">Nouveau Message</span>
            </button>
        </div>

        <div class="messages-container" id="messagesContainer">
            <!-- Messages charg√©s ici -->
        </div>
    </div>

    <!-- MODAL LECTURE -->
    <div id="readModal" class="modal">
        <div class="modal-content">
            <h2 id="readSubject">-</h2>
            <p style="color: #999; margin-bottom: 20px;">
                <strong data-i18n="from">De :</strong> <span id="readFrom">-</span> ‚Ä¢ 
                <strong data-i18n="date">Date :</strong> <span id="readDate">-</span>
            </p>
            <div style="white-space: pre-wrap; line-height: 1.8;" id="readContent">-</div>
            <div class="modal-actions">
                <button class="btn" onclick="replyMessage()">
                    <i class="fas fa-reply"></i> 
                    <span data-i18n="reply">R√©pondre</span>
                </button>
                <button class="btn btn-secondary" onclick="closeReadModal()">
                    <i class="fas fa-times"></i> 
                    <span data-i18n="close">Fermer</span>
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL COMPOSER -->
    <div id="composeModal" class="modal">
        <div class="modal-content">
            <h2 data-i18n="compose_message">‚úâÔ∏è Composer un Message</h2>
            <form id="messageForm" onsubmit="sendMessage(event)">
                <div class="form-group">
                    <label data-i18n="to">Destinataire</label>
                    <input type="text" id="destinataire" required data-i18n-placeholder="recipient_placeholder" placeholder="Nom du client">
                </div>
                <div class="form-group">
                    <label data-i18n="subject">Sujet</label>
                    <input type="text" id="sujet" required data-i18n-placeholder="subject_placeholder" placeholder="Objet du message">
                </div>
                <div class="form-group">
                    <label data-i18n="message">Message</label>
                    <textarea id="contenu" required data-i18n-placeholder="message_placeholder" placeholder="√âcrivez votre message..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn">
                        <i class="fas fa-paper-plane"></i> 
                        <span data-i18n="send">Envoyer</span>
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeComposeModal()">
                        <span data-i18n="cancel">Annuler</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function logout() {
            window.location.href = 'index.html';
        }

        // MESSAGES EXEMPLAIRES
        let messages = [
            { id: 1, expediteur: "Sarah & Ahmed El Mansouri", sujet: "Modification du menu - allergies alimentaires", contenu: "Bonjour,\n\nNous venons de d√©couvrir que plusieurs de nos invit√©s ont des allergies au gluten et aux fruits de mer.\n\nPouvez-vous nous proposer des alternatives pour le menu principal ?\n\nMerci de nous recontacter rapidement, notre mariage est pr√©vu dans 3 semaines.\n\nCordialement,\nSarah & Ahmed", date: "2026-01-11", lu: false },
            { id: 2, expediteur: "Fatima Benali", sujet: "Confirmation de la r√©servation - 15 juin 2026", contenu: "Bonjour,\n\nJe souhaite confirmer la r√©servation de votre salle pour le 15 juin 2026.\n\nPouvez-vous me confirmer :\n- La capacit√© maximale (nous attendons 250 invit√©s)\n- Les horaires d'acc√®s pour la d√©coration (veille ou jour J)\n- Le montant de l'acompte √† verser\n\nDans l'attente de votre retour.\n\nCordialement,\nFatima", date: "2026-01-10", lu: true },
            { id: 3, expediteur: "Leila & Omar Tazi", sujet: "Demande de devis complet - Septembre 2026", contenu: "Bonjour,\n\nNous planifions notre mariage pour septembre 2026 (date flexible) et nous aimerions obtenir un devis d√©taill√©.\n\nNos besoins :\n- 180-200 invit√©s\n- C√©r√©monie + r√©ception\n- D√©coration florale (th√®me romantique)\n- Traiteur (menu marocain et international)\n- DJ + photographe\n\nBudget estim√© : 250 000 MAD\n\nPouvez-vous nous recevoir pour une consultation ?\n\nMerci,\nLeila & Omar", date: "2026-01-09", lu: false },
            { id: 4, expediteur: "Khadija Alami", sujet: "Livraison des photos et vid√©os du mariage", contenu: "Bonjour,\n\nNotre mariage a eu lieu le 28 d√©cembre 2025.\n\nLe photographe nous avait promis la livraison des photos dans un d√©lai de 10 jours. Nous sommes maintenant √† J+14.\n\nPouvez-vous faire un suivi avec l'√©quipe Photo Dreams ? Nous sommes tr√®s impatients de recevoir nos souvenirs.\n\nMerci d'avancer ce dossier.\n\nCordialement,\nKhadija", date: "2026-01-08", lu: true },
            { id: 5, expediteur: "Amine Berrada", sujet: "Changement de date - Report au 5 ao√ªt", contenu: "Bonjour,\n\nSuite √† un impr√©vu familial, nous devons malheureusement reporter notre mariage pr√©vu le 22 juillet au 5 ao√ªt 2026.\n\nLa nouvelle date est-elle disponible dans votre planning ?\n\nQuels sont les frais de modification ?\n\nMerci de votre compr√©hension.\n\nAmicalement,\nAmine", date: "2026-01-07", lu: true },
            { id: 6, expediteur: "Salma & Youssef Idrissi", sujet: "Question sur les forfaits d√©coration", contenu: "Bonjour,\n\nNous avons visit√© votre showroom hier et nous avons ador√© le forfait \"Oriental Chic\".\n\nQuestions :\n1. Le forfait inclut-il l'installation et le d√©montage ?\n2. Peut-on personnaliser les couleurs (nous pr√©f√©rons le bleu royal au dor√©) ?\n3. Y a-t-il des frais suppl√©mentaires pour une salle de 300m¬≤ ?\n\nMerci pour vos r√©ponses.\n\nSalma & Youssef", date: "2026-01-06", lu: false },
            { id: 7, expediteur: "Nadia Moussaoui", sujet: "Probl√®me avec le paiement en ligne", contenu: "Bonjour,\n\nJ'essaie de r√©gler l'acompte de 50 000 MAD via votre plateforme de paiement mais la transaction √©choue √† chaque fois.\n\nJ'ai essay√© avec 3 cartes diff√©rentes.\n\nPouvez-vous v√©rifier le probl√®me technique ou me donner un RIB pour virement bancaire ?\n\nUrgent SVP.\n\nNadia", date: "2026-01-05", lu: false },
            { id: 8, expediteur: "Rachid & Imane Zaimi", sujet: "Recommandation d'un DJ professionnel", contenu: "Bonjour,\n\nVous aviez organis√© le mariage de nos amis Karim et Sophia en novembre dernier.\n\nIls nous ont chaudement recommand√© vos services !\n\nNous planifions notre mariage pour mai 2026 et nous cherchons un DJ qui sait mettre l'ambiance (mix cha√¢bi/international).\n\nAvez-vous des prestataires √† nous recommander ?\n\nMerci,\nRachid & Imane", date: "2026-01-04", lu: true },
            { id: 9, expediteur: "Meryem Benjelloun", sujet: "Annulation de r√©servation - Remboursement", contenu: "Bonjour,\n\nPour des raisons personnelles, nous devons malheureusement annuler notre mariage pr√©vu le 10 mars 2026.\n\nNous avons vers√© un acompte de 30 000 MAD.\n\nSelon vos conditions g√©n√©rales, quel montant pourra √™tre rembours√© ?\n\nNous sommes d√©sol√©s pour ce contretemps.\n\nCordialement,\nMeryem", date: "2026-01-03", lu: true },
            { id: 10, expediteur: "Karim El Fassi", sujet: "Demande d'ajout d'une prestation last minute", contenu: "Bonjour,\n\nNotre mariage est dans 5 jours (16 janvier) et nous aimerions ajouter une prestation photobooth pour la soir√©e.\n\nEst-ce encore possible ?\n\nQuel serait le tarif pour 4 heures ?\n\nMerci de me r√©pondre rapidement.\n\nKarim", date: "2026-01-11", lu: false }
        ];

        let currentMessageId = null;

        function updateStats() {
            document.getElementById('totalMessages').textContent = messages.length;
            document.getElementById('newMessages').textContent = messages.filter(m => !m.lu).length;
            document.getElementById('readMessages').textContent = messages.filter(m => m.lu).length;
        }

        function renderMessages() {
            const container = document.getElementById('messagesContainer');
            const newLabel = currentLang === 'fr' ? 'Nouveau' : currentLang === 'en' ? 'New' : 'ÿ¨ÿØŸäÿØ';
            
            container.innerHTML = messages.map(m => `
                <div class="message-card" onclick="viewMessage(${m.id})">
                    <div class="message-header">
                        <div>
                            <span class="message-sender">${m.expediteur}</span>
                            ${!m.lu ? `<span class="badge-new">${newLabel}</span>` : ''}
                        </div>
                        <span class="message-date">${new Date(m.date).toLocaleDateString('fr-FR')}</span>
                    </div>
                    <div class="message-subject">${m.sujet}</div>
                    <div class="message-preview">${m.contenu.substring(0, 120)}...</div>
                    <div class="action-btns" onclick="event.stopPropagation()">
                        <button class="btn-icon" onclick="viewMessage(${m.id})" title="${t[currentLang].read}">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn-icon" onclick="deleteMessage(${m.id})" title="${t[currentLang].delete}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            updateStats();
        }

        function viewMessage(id) {
            const message = messages.find(m => m.id === id);
            if (message) {
                document.getElementById('readSubject').textContent = message.sujet;
                document.getElementById('readFrom').textContent = message.expediteur;
                document.getElementById('readDate').textContent = new Date(message.date).toLocaleDateString('fr-FR');
                document.getElementById('readContent').textContent = message.contenu;
                document.getElementById('readModal').style.display = 'flex';
                
                if (!message.lu) {
                    message.lu = true;
                    renderMessages();
                }
                currentMessageId = id;
            }
        }

        function closeReadModal() {
            document.getElementById('readModal').style.display = 'none';
        }

        function replyMessage() {
            const message = messages.find(m => m.id === currentMessageId);
            if (message) {
                closeReadModal();
                openComposeModal();
                document.getElementById('destinataire').value = message.expediteur;
                document.getElementById('sujet').value = 'Re: ' + message.sujet;
            }
        }

        function openComposeModal() {
            document.getElementById('composeModal').style.display = 'flex';
        }

        function closeComposeModal() {
            document.getElementById('composeModal').style.display = 'none';
            document.getElementById('messageForm').reset();
        }

        function deleteMessage(id) {
            const confirmMsg = currentLang === 'fr' ? 'Voulez-vous vraiment supprimer ce message ?' : 
                               currentLang === 'en' ? 'Do you really want to delete this message?' : 
                               'ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ŸÇÿß ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©ÿü';
            if (confirm(confirmMsg)) {
                messages = messages.filter(m => m.id !== id);
                renderMessages();
            }
        }

        function sendMessage(event) {
            event.preventDefault();
            
            const newMessage = {
                id: Date.now(),
                expediteur: document.getElementById('destinataire').value,
                sujet: document.getElementById('sujet').value,
                contenu: document.getElementById('contenu').value,
                date: new Date().toISOString().split('T')[0],
                lu: true
            };

            messages.unshift(newMessage);
            renderMessages();
            closeComposeModal();
            
            const notif = document.getElementById('notification');
            notif.style.display = 'block';
            setTimeout(() => { notif.style.display = 'none'; }, 3000);
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            document.querySelectorAll('.message-card').forEach(card => {
                card.style.display = card.textContent.toLowerCase().includes(term) ? '' : 'none';
            });
        });

        window.onclick = function(event) {
            const readModal = document.getElementById('readModal');
            const composeModal = document.getElementById('composeModal');
            if (event.target == readModal) closeReadModal();
            if (event.target == composeModal) closeComposeModal();
        }

        // CHARGEMENT IMM√âDIAT
        renderMessages();
    </script>

    <script>
    let currentLang = 'fr';
    
    const t = {
        fr: {
            dashboard: "Tableau de bord",
            clients: "Clients",
            mariages: "Mariages",
            prestataires: "Prestataires",
            paiements: "Paiements",
            messages: "Messages",
            logout: "D√©connexion",
            messages_title: "Messagerie",
            messages_subtitle: "Communication avec les clients",
            total_messages: "Total Messages",
            new_messages: "Nouveaux",
            read_messages: "Lus",
            search: "Rechercher...",
            compose: "Nouveau Message",
            from: "De :",
            date: "Date :",
            reply: "R√©pondre",
            close: "Fermer",
            compose_message: "‚úâÔ∏è Composer un Message",
            to: "Destinataire",
            subject: "Sujet",
            message: "Message",
            send: "Envoyer",
            cancel: "Annuler",
            msg_success: "Message envoy√© avec succ√®s !",
            read: "Lire",
            delete: "Supprimer",
            recipient_placeholder: "Nom du client",
            subject_placeholder: "Objet du message",
            message_placeholder: "√âcrivez votre message..."
        },
        en: {
            dashboard: "Dashboard",
            clients: "Clients",
            mariages: "Weddings",
            prestataires: "Vendors",
            paiements: "Payments",
            messages: "Messages",
            logout: "Logout",
            messages_title: "Messages",
            messages_subtitle: "Client communication",
            total_messages: "Total Messages",
            new_messages: "New",
            read_messages: "Read",
            search: "Search...",
            compose: "New Message",
            from: "From:",
            date: "Date:",
            reply: "Reply",
            close: "Close",
            compose_message: "‚úâÔ∏è Compose Message",
            to: "Recipient",
            subject: "Subject",
            message: "Message",
            send: "Send",
            cancel: "Cancel",
            msg_success: "Message sent successfully!",
            read: "Read",
            delete: "Delete",
            recipient_placeholder: "Client name",
            subject_placeholder: "Message subject",
            message_placeholder: "Write your message..."
        },
        ar: {
            dashboard: "ŸÑŸàÿ≠ÿ© ÿßŸÑŸÇŸäÿßÿØÿ©",
            clients: "ÿßŸÑÿπŸÖŸÑÿßÿ°",
            mariages: "ÿ≠ŸÅŸÑÿßÿ™ ÿßŸÑÿ≤ŸÅÿßŸÅ",
            prestataires: "ŸÖŸÇÿØŸÖŸà ÿßŸÑÿÆÿØŸÖÿßÿ™",
            paiements: "ÿßŸÑŸÖÿØŸÅŸàÿπÿßÿ™",
            messages: "ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ",
            logout: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨",
            messages_title: "ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ",
            messages_subtitle: "ÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑÿπŸÖŸÑÿßÿ°",
            total_messages: "ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ",
            new_messages: "ÿ¨ÿØŸäÿØ",
            read_messages: "ŸÖŸÇÿ±Ÿàÿ°",
            search: "ÿ®ÿ≠ÿ´...",
            compose: "ÿ±ÿ≥ÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©",
            from: "ŸÖŸÜ:",
            date: "ÿßŸÑÿ™ÿßÿ±ŸäÿÆ:",
            reply: "ÿ±ÿØ",
            close: "ÿ•ÿ∫ŸÑÿßŸÇ",
            compose_message: "‚úâÔ∏è ŸÉÿ™ÿßÿ®ÿ© ÿ±ÿ≥ÿßŸÑÿ©",
            to: "ÿßŸÑŸÖÿ≥ÿ™ŸÑŸÖ",
            subject: "ÿßŸÑŸÖŸàÿ∂Ÿàÿπ",
            message: "ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©",
            send: "ÿ•ÿ±ÿ≥ÿßŸÑ",
            cancel: "ÿ•ŸÑÿ∫ÿßÿ°",
            msg_success: "ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ÿ®ŸÜÿ¨ÿßÿ≠!",
            read: "ŸÇÿ±ÿßÿ°ÿ©",
            delete: "ÿ≠ÿ∞ŸÅ",
            recipient_placeholder: "ÿßÿ≥ŸÖ ÿßŸÑÿπŸÖŸäŸÑ",
            subject_placeholder: "ŸÖŸàÿ∂Ÿàÿπ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©",
            message_placeholder: "ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ..."
        }
    };

    function setLang(lang) {
        currentLang = lang;
        localStorage.setItem('lang', lang);
        document.documentElement.lang = lang;
        document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
        
        // Traduire les textes
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (t[lang] && t[lang][key]) {
                el.textContent = t[lang][key];
            }
        });
        
        // Traduire les placeholders
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            if (t[lang] && t[lang][key]) {
                el.placeholder = t[lang][key];
            }
        });
        
        // Re-render messages pour badge "Nouveau"
        renderMessages();
    }

    window.addEventListener('DOMContentLoaded', () => {
        const lang = localStorage.getItem('lang') || 'fr';
        currentLang = lang;
        document.getElementById('langSelect').value = lang;
        setLang(lang);
    });
    </script>

</body>
</html>
